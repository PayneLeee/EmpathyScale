# Data Directory - æ–°çš„æ—¶é—´æˆ³ç»„ç»‡å­˜å‚¨ç»“æ„

è¿™ä¸ªç›®å½•åŒ…å«äº†å¤šæ™ºèƒ½ä½“å·¥ä½œæµç¨‹çš„æ‰€æœ‰ä¸­é—´ç»“æœå’Œè¾“å‡ºï¼Œé‡‡ç”¨æŒ‰æ—¶é—´æˆ³ç»„ç»‡çš„æ–°å­˜å‚¨ç»“æ„ã€‚

## ğŸ“ æ–°çš„ç›®å½•ç»“æ„

```
data/
â”œâ”€â”€ runs/                         # æŒ‰æ—¶é—´æˆ³ç»„ç»‡çš„è¿è¡Œè®°å½•
â”‚   â”œâ”€â”€ 20251025_160339/         # æ¯æ¬¡è¿è¡Œçš„ç‹¬ç«‹æ–‡ä»¶å¤¹
â”‚   â”‚   â”œâ”€â”€ interview/           # è®¿è°ˆé˜¶æ®µæ•°æ®
â”‚   â”‚   â”‚   â”œâ”€â”€ intermediate_results/
â”‚   â”‚   â”‚   â””â”€â”€ interview_data_*.json
â”‚   â”‚   â”œâ”€â”€ research/           # ç ”ç©¶é˜¶æ®µæ•°æ®
â”‚   â”‚   â”‚   â”œâ”€â”€ intermediate_results/
â”‚   â”‚   â”‚   â”œâ”€â”€ papers/
â”‚   â”‚   â”‚   â”œâ”€â”€ pdfs/
â”‚   â”‚   â”‚   â””â”€â”€ research_data_*.json
â”‚   â”‚   â”œâ”€â”€ workflow/           # å·¥ä½œæµç¨‹æ•°æ®
â”‚   â”‚   â”‚   â””â”€â”€ workflow_summary_*.json
â”‚   â”‚   â””â”€â”€ metadata.json       # è¿è¡Œå…ƒæ•°æ®
â”‚   â”œâ”€â”€ 20251025_161500/         # å¦ä¸€æ¬¡è¿è¡Œ
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ latest/                  # æœ€æ–°è¿è¡Œçš„å‰¯æœ¬
â”œâ”€â”€ templates/                   # æ¨¡æ¿å’Œé…ç½®æ–‡ä»¶ï¼ˆé¢„ç•™ï¼‰
â””â”€â”€ README.md                   # æœ¬æ–‡ä»¶
```

## ğŸ¯ æ–°ç»“æ„ç‰¹ç‚¹

### âœ… **æ—¶é—´æˆ³éš”ç¦»**
- æ¯æ¬¡è¿è¡Œéƒ½æœ‰ç‹¬ç«‹çš„æ–‡ä»¶å¤¹ï¼ˆæ ¼å¼ï¼šYYYYMMDD_HHMMSSï¼‰
- ä¸åŒè¿è¡Œçš„æ•°æ®å®Œå…¨éš”ç¦»ï¼Œé¿å…å†²çª
- ä¿ç•™å®Œæ•´çš„å†å²è¿è¡Œè®°å½•

### âœ… **é˜¶æ®µåˆ†ç¦»**
- **interview/**: è®¿è°ˆé˜¶æ®µçš„æ‰€æœ‰æ•°æ®
- **research/**: ç ”ç©¶é˜¶æ®µçš„æ‰€æœ‰æ•°æ®ï¼ˆåŒ…æ‹¬paperså’Œpdfsï¼‰
- **workflow/**: å·¥ä½œæµç¨‹çº§åˆ«çš„æ‘˜è¦å’Œå…ƒæ•°æ®

### âœ… **å®Œæ•´è¿½è¸ª**
- **metadata.json**: æ¯ä¸ªè¿è¡Œçš„å®Œæ•´å…ƒæ•°æ®
- é˜¶æ®µçŠ¶æ€è¿½è¸ªï¼ˆpending â†’ started â†’ completedï¼‰
- æ–‡ä»¶åˆ›å»ºè®°å½•å’Œæ—¶é—´æˆ³
- ç»Ÿè®¡ä¿¡æ¯ï¼ˆæ€»æ–‡ä»¶æ•°ã€å„é˜¶æ®µæ–‡ä»¶æ•°ï¼‰

### âœ… **å¿«é€Ÿè®¿é—®**
- **latest/**: æœ€æ–°è¿è¡Œçš„å‰¯æœ¬ï¼Œä¾¿äºå¿«é€Ÿè®¿é—®
- é€šè¿‡run_idå¯ä»¥å¿«é€Ÿå®šä½ç‰¹å®šè¿è¡Œ

## ğŸ“Š æ•°æ®æµç¨‹

### 1. **è¿è¡Œåˆ›å»º**
```python
run_manager = RunManager("data")
run_id = run_manager.create_new_run()  # åˆ›å»ºæ–°çš„æ—¶é—´æˆ³æ–‡ä»¶å¤¹
```

### 2. **é˜¶æ®µç®¡ç†**
```python
# æ›´æ–°é˜¶æ®µçŠ¶æ€
run_manager.update_phase_status("interview", "started")
run_manager.update_phase_status("interview", "completed")
```

### 3. **æ•°æ®ä¿å­˜**
```python
data_saver = DataSaver(run_manager)
# è‡ªåŠ¨ä¿å­˜åˆ°å½“å‰è¿è¡Œçš„ç›¸åº”é˜¶æ®µç›®å½•
data_saver.save_interview_data(data)
data_saver.save_research_data(data)
data_saver.save_pdf_metadata(data)
```

## ğŸ“‹ å…ƒæ•°æ®ç»“æ„

### metadata.json ç¤ºä¾‹
```json
{
  "run_id": "20251025_160339",
  "created_at": "2025-10-25T16:03:39.978422",
  "status": "initialized",
  "phases": {
    "interview": {
      "status": "completed",
      "started_at": "2025-10-25T16:03:40.000000",
      "completed_at": "2025-10-25T16:05:00.000000",
      "files_created": [
        {
          "filename": "interview_data_20251025_160340.json",
          "created_at": "2025-10-25T16:03:40.044775"
        }
      ]
    },
    "research": {
      "status": "active",
      "started_at": "2025-10-25T16:05:00.000000",
      "completed_at": null,
      "files_created": [...]
    },
    "workflow": {
      "status": "pending",
      "started_at": null,
      "completed_at": null,
      "files_created": []
    }
  },
  "config": {
    "interview_agent": "interview_agent_group",
    "research_agent": "research_agent_group",
    "workflow_mode": "complete"
  },
  "statistics": {
    "total_files": 5,
    "interview_files": 2,
    "research_files": 2,
    "workflow_files": 1
  }
}
```

## ğŸ”§ ç®¡ç†åŠŸèƒ½

### è¿è¡Œç®¡ç†
- **åˆ›å»ºæ–°è¿è¡Œ**: `run_manager.create_new_run()`
- **è·å–è¿è¡Œä¿¡æ¯**: `run_manager.get_run_info()`
- **åˆ—å‡ºæ‰€æœ‰è¿è¡Œ**: `run_manager.list_all_runs()`
- **æ¸…ç†æ—§è¿è¡Œ**: `run_manager.cleanup_old_runs(keep_last=10)`

### æ•°æ®ä¿å­˜
- **è®¿è°ˆæ•°æ®**: `data_saver.save_interview_data(data)`
- **ç ”ç©¶æ•°æ®**: `data_saver.save_research_data(data)`
- **PDFå…ƒæ•°æ®**: `data_saver.save_pdf_metadata(data)`
- **å·¥ä½œæµç¨‹æ‘˜è¦**: `data_saver.save_workflow_summary(data)`

## ğŸ’¡ ä½¿ç”¨å»ºè®®

### 1. **è¿è¡Œç®¡ç†**
- æ¯æ¬¡å¯åŠ¨å·¥ä½œæµç¨‹éƒ½ä¼šåˆ›å»ºæ–°çš„è¿è¡Œè®°å½•
- å¯ä»¥é€šè¿‡run_idè¿½è¸ªç‰¹å®šè¿è¡Œçš„æ‰€æœ‰æ•°æ®
- ä½¿ç”¨latestç›®å½•å¿«é€Ÿè®¿é—®æœ€æ–°ç»“æœ

### 2. **æ•°æ®ç»„ç»‡**
- æ¯ä¸ªé˜¶æ®µçš„æ•°æ®éƒ½ä¿å­˜åœ¨å¯¹åº”çš„å­ç›®å½•ä¸­
- æ–‡ä»¶ååŒ…å«æ—¶é—´æˆ³ï¼Œé¿å…å†²çª
- å…ƒæ•°æ®æ–‡ä»¶è®°å½•å®Œæ•´çš„è¿è¡Œä¿¡æ¯

### 3. **å†å²ç®¡ç†**
- å®šæœŸæ¸…ç†æ—§çš„è¿è¡Œè®°å½•ä»¥èŠ‚çœç©ºé—´
- é‡è¦è¿è¡Œå¯ä»¥æ‰‹åŠ¨å¤‡ä»½
- é€šè¿‡å…ƒæ•°æ®å¿«é€Ÿäº†è§£è¿è¡ŒçŠ¶æ€

### 4. **è°ƒè¯•å’Œç›‘æ§**
- é€šè¿‡metadata.jsonäº†è§£è¿è¡ŒçŠ¶æ€
- æ£€æŸ¥å„é˜¶æ®µçš„æ–‡ä»¶åˆ›å»ºæƒ…å†µ
- ä½¿ç”¨ç»Ÿè®¡ä¿¡æ¯ç›‘æ§æ•°æ®é‡

## ğŸš€ ä¼˜åŠ¿

1. **ç‰ˆæœ¬æ§åˆ¶**: æ¯æ¬¡è¿è¡Œéƒ½æœ‰å®Œæ•´çš„å†å²è®°å½•
2. **æ•°æ®éš”ç¦»**: ä¸åŒè¿è¡Œçš„æ•°æ®ä¸ä¼šç›¸äº’å¹²æ‰°
3. **çŠ¶æ€è¿½è¸ª**: å®Œæ•´çš„é˜¶æ®µçŠ¶æ€å’Œæ–‡ä»¶è¿½è¸ª
4. **å¿«é€Ÿè®¿é—®**: é€šè¿‡latesté“¾æ¥å¿«é€Ÿè®¿é—®æœ€æ–°ç»“æœ
5. **æ˜“äºç®¡ç†**: å¯ä»¥è½»æ¾æ¸…ç†ã€å¤‡ä»½æˆ–å½’æ¡£è¿è¡Œè®°å½•
6. **æ‰©å±•æ€§**: å¯ä»¥è½»æ¾æ·»åŠ æ–°çš„é˜¶æ®µæˆ–æ•°æ®ç±»å‹

è¿™ç§æ–°çš„å­˜å‚¨ç»“æ„ä¸ºå¤šæ™ºèƒ½ä½“å·¥ä½œæµç¨‹æä¾›äº†å®Œæ•´çš„æ•°æ®ç®¡ç†å’Œè¿½è¸ªèƒ½åŠ›ï¼